from kivy.app import App
from kivy.lang import Builder
import json
import requests

KV = Builder.load_string ("""
ScreenManager:
    id: manager
    Screen:
        BoxLayout:
            orientation: 'vertical'
            GridLayout:
                cols:1
            GridLayout:
                cols:1
                Button:
                    text: 'Delete'
                    on_release: app.delete(JSON.text)
                Button:
                    text: 'Show Message'
                    on_release: app.get()
""")

class MyApp(App):

    url = 'https://file-uploading-2e4d3-default-rtdb.firebaseio.com/.json'

    def delete(self, JSON):
        requests.delete(url = self.url[:-5] + JSON + ".json")

    auth_key = 'MjkD5FlsRY26zq97t0l3BkBJXkNqBed5fP4lVHzM'


    def get(self):
        request = requests.get(self.url + '?auth=' + self.auth_key)
        print(request.json())

    def build(self):
        return KV

if __name__ == '__main__':
    MyApp().run()
